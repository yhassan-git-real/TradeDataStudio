<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TradeDataStudio.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:components="using:TradeDataStudio.Desktop.Views.Components"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="700"
        x:Class="TradeDataStudio.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="TradeData Studio"
        Width="1200" Height="700"
        MinWidth="800" MinHeight="550">

    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <StyleInclude Source="/Views/Styles/AppStyles.axaml"/>
        <StyleInclude Source="/Views/Styles/ButtonStyles.axaml"/>
        <StyleInclude Source="/Views/Styles/FormStyles.axaml"/>
        <StyleInclude Source="/Views/Styles/AnimationStyles.axaml"/>
    </Window.Styles>

    <Grid>
        <DockPanel>
            <!-- Menu Bar -->
            <Menu DockPanel.Dock="Top" Background="#052633" BorderBrush="{DynamicResource DefaultBorder}" BorderThickness="0,0,0,1" Height="28">
                <MenuItem Header="_File">
                    <MenuItem Header="_New Project" Command="{Binding ResetCommand}" InputGesture="Ctrl+N">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“„" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator/>
                    <MenuItem Header="_Settings" Command="{Binding SettingsCommand}" InputGesture="Ctrl+,">
                        <MenuItem.Icon>
                            <TextBlock Text="âš™ï¸" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator/>
                    <MenuItem Header="E_xit" Command="{Binding ExitCommand}" InputGesture="Alt+F4">
                        <MenuItem.Icon>
                            <TextBlock Text="âŒ" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                
                <MenuItem Header="_Edit">
                    <MenuItem Header="_Reset Form" Command="{Binding ResetCommand}" InputGesture="Ctrl+R">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ”„" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator/>
                    <MenuItem Header="_Copy Output Location" Command="{Binding CopyOutputLocationCommand}" InputGesture="Ctrl+C">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“‹" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                
                <MenuItem Header="_View">
                    <MenuItem Header="View _Logs" Command="{Binding ViewLogsCommand}" InputGesture="Ctrl+L">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“‹" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Refresh" Command="{Binding RefreshCommand}" InputGesture="F5">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ”„" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                
                <MenuItem Header="_Settings">
                    <MenuItem Header="Database _Settings" Command="{Binding SettingsCommand}" InputGesture="Ctrl+,">
                        <MenuItem.Icon>
                            <TextBlock Text="âš™ï¸" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                
                <MenuItem Header="_Help">
                    <MenuItem Header="_User Guide" Command="{Binding ShowUserGuideCommand}" InputGesture="F1">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“–" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Keyboard Shortcuts" Command="{Binding ShowShortcutsCommand}">
                        <MenuItem.Icon>
                            <TextBlock Text="âŒ¨ï¸" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator/>
                    <MenuItem Header="_About TradeData Studio" Command="{Binding ShowAboutCommand}">
                        <MenuItem.Icon>
                            <TextBlock Text="â„¹ï¸" FontSize="14"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </Menu>
        
        <!-- Footer with Connection Status -->
        <Border DockPanel.Dock="Bottom">
            <components:FooterBar/>
        </Border>
        
        <!-- Main Content -->
        <Grid>
            <!-- Layer 1: Background Gradient -->
            <Border Background="{DynamicResource BackgroundGradientDark}"/>
            
            <!-- Layer 2: Star Pattern Overlay -->
            <Border Background="{DynamicResource StarPatternBrush}" IsHitTestVisible="False"/>
            
            <!-- Layer 3: Content -->
            <ScrollViewer ClipToBounds="False">
                <StackPanel Margin="12,6">
                    <!-- Horizontal Grid with Configuration and Actions Cards (70:30 split) -->
                    <Grid ColumnDefinitions="7*,3*" Margin="0,0,0,8">
                        <!-- Configuration Card (70%) -->
                        <components:ConfigurationPanel Grid.Column="0" Margin="0,0,6,0"/>
                        
                        <!-- Actions Card (30%) -->
                        <components:ActionsPanel Grid.Column="1" Margin="6,0,0,0"/>
                    </Grid>

                    <!-- Activity Log Panel -->
                    <components:ActivityLogPanel/>
                </StackPanel>
            </ScrollViewer>
        </Grid>
        </DockPanel>
        
        <!-- Table Selection Popup -->
        <components:TableSelectionPopup/>
    </Grid>

</Window>
